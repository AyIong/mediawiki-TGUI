/* Themes */
.skin-theme-clientpref-os {
  @media (prefers-color-scheme: dark) {
    :root& {
      .dark-theme();
      .dark-palette();
    }
  }
}

.skin-theme-clientpref-os {
  @media (prefers-color-scheme: light) {
    :root& {
      .light-theme();
      .light-palette();
    }
  }
}

.skin-theme-clientpref-night {
  :root& {
    .dark-theme();
    .dark-palette();
  }
}

.skin-theme-clientpref-day {
  :root& {
    .light-theme();
    .light-palette();
  }
}

/* Blur */
.disable-blur() {
  :root& {
    --blur-default: none;
    --color-bg-light: var(--color-bg-light-opaque);
  }

  @media (prefers-color-scheme: light) {
    :root& {
      --blur-default: none;
      --color-bg-light: var(--color-bg-light-opaque);
    }
  }

  @media (prefers-color-scheme: dark) {
    :root& {
      --blur-default: none;
      --color-bg-light: var(--color-bg-light-opaque);
    }
  }
}

.tgui-feature-blur-clientpref-disabled {
  .disable-blur();
}

.tgui-feature-blur-clientpref-full {
  .disable-blur();
  .mw-page-container-inner {
    background-image: none !important;
  }
}

/* Link Shadows */
.disable-link-shadows() {
  --hyperlink-shadow-new: none;
  --hyperlink-shadow-new-hover: none;
}

.tgui-feature-link-shadows-clientpref-disabled {
  :root& {
    .disable-link-shadows();
  }

  @media (prefers-color-scheme: light) {
    :root& {
      .disable-link-shadows();
    }
  }

  @media (prefers-color-scheme: dark) {
    :root& {
      .disable-link-shadows();
    }
  }
}

/* Reduced Motion */
.tgui-feature-reduced-motion-clientpref-enabled {
  :root& {
    --transition-time: 0;
  }
}

/* Darkened Images */
.tgui-feature-darkened-images-clientpref-light {
  html,
  body {
    :root.skin-theme-clientpref-night& {
      img {
        filter: brightness(0.9);
      }
    }

    @media (prefers-color-scheme: dark) {
      :root.skin-theme-clientpref-os& {
        img {
          filter: brightness(0.9);
        }
      }
    }
  }
}

.tgui-feature-darkened-images-clientpref-medium {
  html,
  body {
    :root.skin-theme-clientpref-night& {
      img {
        filter: brightness(0.75);
      }
    }

    @media (prefers-color-scheme: dark) {
      :root.skin-theme-clientpref-os& {
        img {
          filter: brightness(0.75);
        }
      }
    }
  }
}

/* Sticky Header */
.tgui-feature-sticky-header-clientpref-enabled {
  .tgui-scroll--down {
    .mw-header {
      transform: translateY(-66px);
    }

    .tgui-sidebar-container {
      top: 0;
      height: 100vh;
    }
  }
}
